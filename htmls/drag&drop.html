<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Management and Prioritizer</title>
  <style>
    body {
  font-family: Arial, sans-serif;
  background-color: #e8eaf6; /* Pale Blue */
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  padding: 20px;
  max-width: 800px;
  width: 100%;
  margin: 20px;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

    h1 {
      text-align: center;
      color: #3c4e6f;
      margin-bottom: 20px;
    }

    form {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    form label {
      width: 100%;
      font-weight: bold;
      color: #555;
    }

    form input,
    form select,
    form textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 10px;
      font-size: 14px;
    }

    form button {
      background-color: #5c6bc0; 
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
    }

    form button:hover {
      background-color: #45a049;
      /* Darker Mint Green */
    }

    #generate-data {
      background-color: #3bacd1;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
      transition: background-color 0.3s ease;
      margin-bottom: 30px;
    }

    #generate-data:hover {
      background-color: #3493b5;
    }

    .task-container {
      margin-top: 20px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.2);
      /* Light gray with transparency */
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      position: relative;
      backdrop-filter: blur(10px);
      /* Blur effect */
      -webkit-backdrop-filter: blur(10px);
      /* For Safari */
    }

    .task-container.drag-over {
      background-color: rgba(255, 255, 255, 0.3);
      /* Slightly more opaque for drag-over state */
      border: 2px dashed #333;
    }

    .task-container .task-item.dragging {
      opacity: 0.5;
    }

    .task-container h3 {
      color: #3bacd1;
      margin-bottom: 10px;
      border-bottom: 2px solid #3bacd1;
      padding-bottom: 5px;
    }

    .task-container ul {
      list-style: none;
      padding: 0;
    }

    .task-container li {
      background-color: rgba(255, 255, 255, 0.8);
      /* Slightly opaque white */
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 10px;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
      cursor: pointer;
    }

    .task-container li strong {
      display: block;
      font-size: 16px;
      margin-bottom: 5px;
    }

    .task-container li button {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }

    .task-container li button.edit-btn {
      background-color: #f39c12;
      margin-right: 5px;
    }

    .task-container li button.edit-btn:hover {
      background-color: #e67e22;
    }

    .task-container li button.delete-btn:hover {
      background-color: #c0392b;
    }

    .clear-fix {
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }

    .sort-filter-container {
      margin-top: 30px;
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    .sort-filter-container label {
      margin-right: 10px;
    }

    .sort-filter-container select {
      padding: 5px;
    }

    @media (max-width: 600px) {
      .clear-fix {
        flex-direction: column;
      }

      .sort-filter-container {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>

</head>

<body>
  <div class="container">
    <h1>Task Management and Prioritizer</h1>
    <form id="task-form">
      <label for="task-name">Task Name:</label>
      <input type="text" id="task-name" required>
      <label for="task-description">Task Description:</label>
      <textarea id="task-description"></textarea>
      <label for="due-date">Due Date:</label>
      <input type="date" id="due-date" required>
      <label for="importance">Importance:</label>
      <select id="importance">
        <option value="high">High</option>
        <option value="medium">Medium</option>
        <option value="low">Low</option>
      </select>
      <label for="urgency">Urgency:</label>
      <select id="urgency">
        <option value="high">High</option>
        <option value="medium">Medium</option>
        <option value="low">Low</option>
      </select>
      <label for="status">Status:</label>
      <select id="status">
        <option value="pending">Pending</option>
        <option value="in progress">In Progress</option>
        <option value="completed">Completed</option>
      </select>
      <button type="submit">Add Task</button>
    </form>

    <div class="sort-filter-container">
      <div>
        <label for="sort">Sort By:</label>
        <select id="sort" onchange="sortTasks()">
          <option value="date">Due Date</option>
          <option value="priority">Priority</option>
        </select>
      </div>

      <div>
        <label for="filter-status">Filter By Status:</label>
        <select id="filter-status" onchange="filterTasksByStatus()">
          <option value="all">All</option>
          <option value="pending">Pending</option>
          <option value="in progress">In Progress</option>
          <option value="completed">Completed</option>
        </select>
      </div>
    </div>

    <div>
      <button id="generate-data">Generate Data</button>
    </div>

    <div class="clear-fix">
      <div id="pending-tasks" class="task-container">
        <h3>Pending Tasks</h3>
        <ul id="pending-tasks-list"></ul>
      </div>
      <div id="in-progress-tasks" class="task-container">
        <h3>In Progress Tasks</h3>
        <ul id="in-progress-tasks-list"></ul>
      </div>
      <div id="completed-tasks" class="task-container">
        <h3>Completed Tasks</h3>
        <ul id="completed-tasks-list"></ul>
      </div>
    </div>
  </div>
  <script>
    const taskForm = document.getElementById('task-form');
    const generateDataBtn = document.getElementById('generate-data');
    const filterStatus = document.getElementById('filter-status');
    const pendingTasksList = document.getElementById('pending-tasks-list');
    const inProgressTasksList = document.getElementById('in-progress-tasks-list');
    const completedTasksList = document.getElementById('completed-tasks-list');
    let tasks = [];
    let editIndex = -1;

    document.addEventListener('DOMContentLoaded', () => {
      fetchTasks();
      setupDragAndDrop();
    });

    generateDataBtn.addEventListener('click', () => {
      const days = prompt("Enter the number of days (10-100):");
      if (days >= 10 && days <= 100) {
        generateRandomTasks(days);
      } else {
        alert("Please enter a valid number of days between 10 and 100.");
      }
    });

    const fetchTasks = () => {
      tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      renderTaskList();
    };

    const generateRandomTasks = (days) => {
      const statusOptions = ['pending', 'in progress', 'completed'];
      const urgencyOptions = ['high', 'medium', 'low'];
      const importanceOptions = ['high', 'medium', 'low'];

      for (let i = 0; i < days; i++) {
        const numTasks = Math.floor(Math.random() * 5) + 1;
        for (let j = 0; j < numTasks; j++) {
          const task = {
            id: Date.now() + i + j,
            name: `Task ${i + 1}-${j + 1}`,
            description: `Description for task ${i + 1}-${j + 1}`,
            dueDate: new Date(Date.now() + i * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
            importance: importanceOptions[Math.floor(Math.random() * importanceOptions.length)],
            urgency: urgencyOptions[Math.floor(Math.random() * urgencyOptions.length)],
            status: statusOptions[Math.floor(Math.random() * statusOptions.length)],
          };
          tasks.push(task);
        }
      }
      localStorage.setItem('tasks', JSON.stringify(tasks));
      renderTaskList();
    };

    taskForm.addEventListener('submit', (event) => {
      event.preventDefault();
      const taskName = document.getElementById('task-name').value;
      const taskDescription = document.getElementById('task-description').value;
      const dueDate = document.getElementById('due-date').value;
      const importance = document.getElementById('importance').value;
      const urgency = document.getElementById('urgency').value;
      const status = document.getElementById('status').value;

      if (editIndex === -1) {
        const newTask = {
          id: Date.now(),
          name: taskName,
          description: taskDescription,
          dueDate: dueDate,
          importance: importance,
          urgency: urgency,
          status: status,
        };
        tasks.push(newTask);
      } else {
        tasks[editIndex] = {
          ...tasks[editIndex],
          name: taskName,
          description: taskDescription,
          dueDate: dueDate,
          importance: importance,
          urgency: urgency,
          status: status,
        };
        editIndex = -1;
      }

      localStorage.setItem('tasks', JSON.stringify(tasks));
      taskForm.reset();
      renderTaskList();
    });

    const renderTaskList = (statusFilter = 'all') => {
      pendingTasksList.innerHTML = '';
      inProgressTasksList.innerHTML = '';
      completedTasksList.innerHTML = '';

      tasks
        .filter(task => statusFilter === 'all' || task.status === statusFilter)
        .forEach((task, index) => {
          const taskItem = document.createElement('li');
          taskItem.classList.add('task-item');
          taskItem.setAttribute('draggable', 'true');
          taskItem.setAttribute('data-index', index);
          taskItem.innerHTML = `
        <div>
          <strong>${task.name}</strong>
          <span>${task.description}</span>
          <br>
          <small>Due: ${task.dueDate} | Importance: ${task.importance} | Urgency: ${task.urgency}</small>
        </div>
        <div>
          <button class="edit-btn" onclick="editTask(${index})">Edit</button>
          <button class="delete-btn" onclick="deleteTask(${index})">Delete</button>
        </div>
      `;

          if (task.status === 'pending') {
            pendingTasksList.appendChild(taskItem);
          } else if (task.status === 'in progress') {
            inProgressTasksList.appendChild(taskItem);
          } else if (task.status === 'completed') {
            completedTasksList.appendChild(taskItem);
          }
        });
    };

    const editTask = (index) => {
      const task = tasks[index];
      document.getElementById('task-name').value = task.name;
      document.getElementById('task-description').value = task.description;
      document.getElementById('due-date').value = task.dueDate;
      document.getElementById('importance').value = task.importance;
      document.getElementById('urgency').value = task.urgency;
      document.getElementById('status').value = task.status;
      editIndex = index;
    };

    const deleteTask = (index) => {
      tasks.splice(index, 1);
      localStorage.setItem('tasks', JSON.stringify(tasks));
      renderTaskList();
    };

    const sortTasks = () => {
      const sortOption = document.getElementById('sort').value;
      if (sortOption === 'date') {
        tasks.sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
      } else if (sortOption === 'priority') {
        const priorityMap = { high: 1, medium: 2, low: 3 };
        tasks.sort((a, b) => priorityMap[a.importance] - priorityMap[b.importance]);
      }
      localStorage.setItem('tasks', JSON.stringify(tasks));
      renderTaskList();
    };

    const filterTasksByStatus = () => {
      const status = filterStatus.value;
      renderTaskList(status);
    };

    const setupDragAndDrop = () => {
      const taskContainers = document.querySelectorAll('.task-container');

      taskContainers.forEach(container => {
        container.addEventListener('dragover', (event) => {
          event.preventDefault();
          container.classList.add('drag-over');
        });

        container.addEventListener('dragleave', () => {
          container.classList.remove('drag-over');
        });

        container.addEventListener('drop', (event) => {
          event.preventDefault();
          container.classList.remove('drag-over');

          const taskItem = document.querySelector('.task-item.dragging');
          if (taskItem) {
            const index = parseInt(taskItem.getAttribute('data-index'));
            const newStatus = container.id.split('-')[0]; // e.g., 'pending', 'in-progress', 'completed'

            // Update task status
            if (tasks[index]) {  // Ensure the task exists
              tasks[index].status = newStatus;
              localStorage.setItem('tasks', JSON.stringify(tasks));
              renderTaskList();  // Re-render task lists after status update
            }
          }
        });
      });

      document.addEventListener('dragstart', (event) => {
        if (event.target.tagName === 'LI') {
          event.target.classList.add('dragging');
        }
      });

      document.addEventListener('dragend', (event) => {
        if (event.target.tagName === 'LI') {
          event.target.classList.remove('dragging');
        }
      });
    };

  </script>
</body>

</html>
